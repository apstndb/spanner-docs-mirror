Migrating a schema from your source database to Spanner involves a multi-step process that combines automated tooling with manual analysis and refinement. The following steps outline the recommended approach:

1.  **Schema extraction** : Extract the schema definition (DDL) from your source database.

2.  **Initial conversion** : You can consider using an automated schema conversion tool, such as [Spanner migration tool (SMT)](https://github.com/GoogleCloudPlatform/spanner-migration-tool) , which can handle many of the basic data type mapping and structural conversions.

3.  **Detailed schema review and refinement** : Consider converting your source database schema that's more compatible with Spanner in smaller, deliberate changes, that can be individually tested and optimized to reduce the risk of changing everything at once.
    
    1.  **Data type mapping** : Review and refine the data type mapping generated by SMT. Ensure that Spanner data types accurately represent the range, precision, and semantics of the corresponding source database types.
    2.  **Primary keys and interleaving** : Identify opportunities to use Spanner's interleaved tables to model parent-child relationships present in the source database schema. Choose appropriate [primary key strategies](/spanner/docs/schema-design#primary-key-prevent-hotspots) for Spanner such as using UUIDs. SMT can help you choose an appropriate primary key strategy. Consider the implications for data locality and hotspot avoidance. Evaluate how foreign key constraints are used in your source database and determine how to handle them in Spanner. For more information, see [Parent-child table relationships](/spanner/docs/schema-and-data-model#parent-child) .
    3.  **Index optimization** : Analyze existing indexes in your source database and design Spanner indexes to optimize query performance. Consider dropping infrequently used indexes.
    4.  **Remove incompatibilities** : Remove or rewrite any source database specific features that aren't supported in Spanner. For example, Spanner doesn't support stored procedures or triggers. This might require you to refactor application code.

4.  **Schema deployment** : Deploy the Spanner schema to a development or staging environment.

5.  **Iterative testing and refinement** : [Load sample data](/spanner/docs/load-sample-data) and test the schema with representative application interactions. Monitor performance and identify areas of improvement. Refine the schema based on the results of testing. Repeat this process until the schema meets your application's performance and functional requirements.

6.  **Schema validation** : Develop scripts or procedures to compare the structure of the source database and Spanner schemas to ensure that the conversion was performed correctly.

7.  **Final schema deployment** : Deploy the validated and refined schema to the Spanner production instance.

## Source specific guides

  - MySQL: [Migrate MySQL schema](/spanner/docs/migrate-mysql-schema) .
